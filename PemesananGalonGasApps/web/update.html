<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Galon Gas</title>

        <!-- Bootstrap core CSS -->
        <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom fonts for this template -->
        <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet">

        <!-- Custom styles for this template -->
        <link href="css/business-casual.min.css" rel="stylesheet">
        <style>
table, td, th {
}

table {
  border-collapse: collapse;
  width: 100%;
  color:white;
}

th {
  text-align: left;
}
</style>
    </head>
    <body>
        <h1 class="site-heading text-center text-white d-none d-lg-block">
            <span class="site-heading-upper text-primary mb-3">Pesan Galon Gas</span>
            <span class="site-heading-lower">Business Casual</span>
        </h1>

        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">
            <div class="container">
                <a class="navbar-brand text-uppercase text-expanded font-weight-bold d-lg-none" href="#">Start Bootstrap</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item active px-lg-4">
                            <a class="nav-link text-uppercase text-expanded" href="pemilik.html">Home
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item px-lg-4">
                            <a class="nav-link text-uppercase text-expanded" href="about.html">About</a>
                        </li>
                        <li class="nav-item px-lg-4">
                            <a class="nav-link text-uppercase text-expanded" href="products.html">Products</a>
                        </li>
                        <li class="nav-item px-lg-4">
                            <a class="nav-link text-uppercase text-expanded" href="store.html">Store</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <br>
        <br>
                <div id="id01"></div>
                <script>
                    var table;
                    var xmlhttp = new XMLHttpRequest();
                    var url = "http://202.94.83.190:8080/165314061_165314068_ServicePemesananGalonGas/webresources/pembeli";

                    xmlhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            myFunction(this.responseText);
                        }
                    }
                    xmlhttp.open("GET", url, true);
                    xmlhttp.send();

                    function myFunction(response) {
                        var arr = JSON.parse(response);
                        var i;
                        var out = "<table id='table'><tr><th>ID PESANAN</th><th>NOKTP</th><th>NAMA</th><th>ALAMAT</th><th>NAMABARANG</th>\n\
                <th>JUMLAHBARANG</th><th>WAKTUANTAR</th><th>STATUS</th><th>TOTALHARGA</th></tr>";

                        for (i = 0; i < arr.length; i++) {
                            out += "<tr><td>" +
                                    arr[i].idPemesanan +
                                    "</td><td>" +
                                    arr[i].noKtp +
                                    "</td><td>" +
                                    arr[i].nama+
                                    "</td><td>" +
                                    arr[i].alamat+
                                    "</td><td>" +
                                    arr[i].namaBarang+
                                    "</td><td>" +
                                    arr[i].jumlahBarang+
                                    "</td><td>" +
                                    arr[i].waktuAntar+
                                    "</td><td>" +
                                    arr[i].status +
                                    "</td><td>" +
                                    arr[i].totalHarga;

                        }


                        out += "</table>";
                        document.getElementById("id01").innerHTML = out;
                        table = document.getElementById('table');
                        console.log(table.rows.length);
                        $('#table tr').on('click', function () {
                            console.log('OKKK');
                            $("#nama").val($(this).find("td").eq(2).html());
                            $("#Id").val($(this).find("td").eq(0).html());
                            $("#noKTP").val($(this).find("td").eq(1).html());
                            $("#alamat").val($(this).find("td").eq(3).html());
                            $("#JenisPesanan").val($(this).find("td").eq(4).html());
                            $("#waktuantar").val($(this).find("td").eq(6).html());
                            $("#status").val($(this).find("td").eq(7).html());
                            $("#totalHarga").val($(this).find("td").eq(8).html());
                            $("#jumpesanan").val($(this).find("td").eq(5).html());


                        });
                    }


                </script>
                <br>
                <br>
         <section>
            <div class="container">
                <center><form onsubmit="return make_json(this)" method="POST">
                        <table>
                            <tr>
                                <td style="color: white">Nama</td>
                                <td>:</td>
                                <td><input type="text" id="nama" value="" readonly></td>
                            </tr>
                            <tr>
                                <td style="color: white">Id Pemesanan</td>
                                <td>:</td>
                                <td><input type="text" id="Id" value="" readonly></td>
                            </tr>
                            <tr>
                                <td style="color: white">No. KTP</td>
                                <td>:</td>
                                <td><input type="text" id="noKTP" value="" readonly></td>
                            </tr>
                            <tr>
                                <td style="color: white">Alamat</td>
                                <td>:</td>
                                <td><input type="text" id="alamat" value="" readonly></td>
                            </tr>
                            <tr>
                                <td style="color: white">Jenis Pesanan</td>
                                <td>:</td>
                                <td><input type="text" id="JenisPesanan" value="" readonly></td>
                            </tr>
                            <tr>
                                <td style="color: white">Jumlah Pesanan</td>
                                <td>:</td>
                                <td><input type="text" id="jumpesanan" value="" readonly></td>
                            </tr>
                            <tr>
                                <td style="color: white">Waktu Antar</td>
                                <td>:</td>
                                <td><input type="text" id="waktuantar" value=""></td>
                            </tr>
                            <tr>
                                <td style="color: white">Status</td>
                                <td>:</td>
                                <td><input type="text" id="status" value=""></td> 
                            </tr>
                            <tr>
                                <td style="color: white">Total Harga</td>
                                <td>:</td>
                                <td><input type="text" id="totalHarga" value="" readonly></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td><center><button type="submit" class="Pesan">Uptade</button></center></td>
                            </tr>
                        </table></form></center>
                <pre style="color: white" id="output">
                </pre>
                <script>
                    function make_json(table) {
                        var json = {
                            "idPemesanan": table.Id.value,
                            "noKtp": table.noKTP.value,
                            "nama": table.nama.value,
                            "alamat": table.alamat.value,
                            "namaBarang": table.JenisPesanan.value,
                            "jumlahBarang": table.jumpesanan.value,
                            "waktuAntar": table.waktuantar.value,
                            "status": table.status.value,
                            "totalHarga": table.totalHarga.value
                        };

                        var html = JSON.stringify(json, 0, 100);
                        var Url = "http://202.94.83.190:8080/165314061_165314068_ServicePemesananGalonGas/webresources/pembeli/addNewPesanan";
                        var xhr = new XMLHttpRequest();
                        xhr.open("POST", Url, false);
                        xhr.setRequestHeader("Content-type", "application/json");
                        xhr.send(html);
                        document.getElementById("output").innerHTML = html;
                        return false;
                    }
                </script>

            </div></section>

        <section class="page-section cta">
            <div class="container">
                <div class="row">
                    <div class="col-xl-9 mx-auto">
                        <div class="cta-inner text-center rounded">
                            <h2 class="section-heading mb-4">
                                <span class="section-heading-upper">Janji Kami</span>
                                <span class="section-heading-lower">Untuk Kalian</span>
                            </h2>
                            <p class="mb-0">Ketika Anda masuk ke website kami untuk memulai hari Anda, 
                                kami berdedikasi untuk memberi Anda layanan yang ramah, suasana yang ramah, dan di atas segalanya,
                                produk kami dijamin menggunakan air yang sehat dan gas yang aman serta berkualitas terbaik. Jika Anda tidak puas,
                                beri tahu kami dan kami akan melakukan apa pun yang kami bisa untuk memperbaikinya!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <footer class="footer text-faded text-center py-5">
            <div class="container">
                <p class="m-0 small">Copyright &copy; Galon gas 2018</p>
            </div>
        </footer>
        <script src="vendor/jquery/jquery.min.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    </body>

</html>